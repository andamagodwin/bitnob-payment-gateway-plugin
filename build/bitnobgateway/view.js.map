{"version":3,"file":"bitnobgateway/view.js","mappings":"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","sources":["webpack://bitnobgateway/./src/bitnobgateway/view.js"],"sourcesContent":["/**\n * Bitnob Gateway Frontend JavaScript\n * Handles AJAX form submission and UI interactions\n */\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    const form = document.getElementById('bitnob-form');\n    const loadingDiv = document.getElementById('bitnob-loading');\n    const errorDiv = document.getElementById('bitnob-error');\n    const invoiceDiv = document.getElementById('bitnob-invoice');\n    const submitBtn = document.getElementById('bitnob-submit-btn');\n    const copyBtn = document.getElementById('copy-invoice');\n    const createAnotherBtn = document.getElementById('create-another');\n    const changeEmailBtn = document.getElementById('change-email-btn');\n    const emailInput = document.getElementById('bitnob-email');\n    const changeAmountBtn = document.getElementById('change-amount-btn');\n    const amountInput = document.getElementById('bitnob-amount');\n\n    if (!form || !window.bitnobData) return;\n\n    // Form submission handler\n    form.addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        // Clear previous states\n        hideAllMessages();\n        clearFieldErrors();\n        \n        // Get form data\n        const formData = new FormData();\n        formData.append('action', 'bitnob_create_invoice');\n        formData.append('nonce', window.bitnobData.nonce);\n        formData.append('amount', document.getElementById('bitnob-amount').value);\n        formData.append('email', document.getElementById('bitnob-email').value);\n        formData.append('description', document.getElementById('bitnob-description').value);\n\n        // Validate form\n        if (!validateForm()) {\n            return;\n        }\n\n        // Show loading state\n        showLoading();\n        setButtonLoading(true);\n\n        try {\n            const response = await fetch(window.bitnobData.ajaxUrl, {\n                method: 'POST',\n                body: formData\n            });\n\n            const result = await response.json();\n\n            if (result.success) {\n                showInvoice(result.data);\n            } else {\n                showError(result.data || 'An error occurred while creating the invoice.');\n            }\n        } catch (error) {\n            console.error('AJAX Error:', error);\n            showError('Network error. Please check your connection and try again.');\n        } finally {\n            hideLoading();\n            setButtonLoading(false);\n        }\n    });\n\n    // Copy to clipboard functionality\n    if (copyBtn) {\n        copyBtn.addEventListener('click', function() {\n            const invoiceRequest = document.getElementById('invoice-request').textContent;\n            \n            navigator.clipboard.writeText(invoiceRequest).then(function() {\n                // Show success feedback\n                const originalText = copyBtn.querySelector('.copy-text').textContent;\n                copyBtn.querySelector('.copy-text').textContent = 'Copied!';\n                copyBtn.classList.add('copied');\n                \n                setTimeout(function() {\n                    copyBtn.querySelector('.copy-text').textContent = originalText;\n                    copyBtn.classList.remove('copied');\n                }, 2000);\n            }).catch(function(err) {\n                console.error('Failed to copy: ', err);\n                // Fallback for older browsers\n                fallbackCopyTextToClipboard(invoiceRequest);\n            });\n        });\n    }\n\n    // Create another invoice\n    if (createAnotherBtn) {\n        createAnotherBtn.addEventListener('click', function() {\n            hideAllMessages();\n            form.style.display = 'block';\n            form.reset();\n            \n            // Restore user email if logged in\n            if (window.bitnobData.user.isLoggedIn) {\n                setTimeout(() => {\n                    emailInput.value = window.bitnobData.user.email;\n                    emailInput.setAttribute('readonly', 'readonly');\n                    emailInput.removeAttribute('required');\n                    if (changeEmailBtn) {\n                        changeEmailBtn.textContent = 'Change';\n                    }\n                    // Reset visual styling\n                    emailInput.style.borderColor = '#333';\n                    emailInput.style.backgroundColor = '#2c2c2e';\n                }, 0);\n            }\n            \n            // Restore cart amount if available\n            if (window.bitnobData.cart.hasItems) {\n                setTimeout(() => {\n                    amountInput.value = window.bitnobData.cart.totalSats;\n                    amountInput.setAttribute('readonly', 'readonly');\n                    if (changeAmountBtn) {\n                        changeAmountBtn.textContent = 'Change';\n                    }\n                    // Reset visual styling\n                    amountInput.style.borderColor = 'rgba(76, 175, 80, 0.3)';\n                    amountInput.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';\n                }, 0);\n            }\n            \n            // Restore smart description\n            document.getElementById('bitnob-description').value = window.bitnobData.cart.description || 'Lightning payment';\n        });\n    }\n\n    // Change email functionality for logged-in users\n    if (changeEmailBtn && window.bitnobData.user.isLoggedIn) {\n        changeEmailBtn.addEventListener('click', function() {\n            const currentlyReadonly = emailInput.hasAttribute('readonly');\n            \n            if (currentlyReadonly) {\n                // Enable editing\n                emailInput.removeAttribute('readonly');\n                emailInput.focus();\n                emailInput.select();\n                emailInput.setAttribute('required', 'required');\n                changeEmailBtn.textContent = 'Restore';\n                \n                // Add visual indication\n                emailInput.style.borderColor = '#f7931a';\n                emailInput.style.backgroundColor = '#2c2c2e';\n            } else {\n                // Restore original email\n                emailInput.value = window.bitnobData.user.email;\n                emailInput.setAttribute('readonly', 'readonly');\n                emailInput.removeAttribute('required');\n                changeEmailBtn.textContent = 'Change';\n                \n                // Remove visual indication\n                emailInput.style.borderColor = '#333';\n                emailInput.style.backgroundColor = '#2c2c2e';\n            }\n        });\n\n        // Handle form reset to restore original email\n        form.addEventListener('reset', function() {\n            if (window.bitnobData.user.isLoggedIn) {\n                setTimeout(() => {\n                    emailInput.value = window.bitnobData.user.email;\n                    emailInput.setAttribute('readonly', 'readonly');\n                    emailInput.removeAttribute('required');\n                    if (changeEmailBtn) {\n                        changeEmailBtn.textContent = 'Change';\n                    }\n                }, 0);\n            }\n        });\n    }\n\n    // Change amount functionality for cart items\n    if (changeAmountBtn && window.bitnobData.cart.hasItems) {\n        changeAmountBtn.addEventListener('click', function() {\n            const currentlyReadonly = amountInput.hasAttribute('readonly');\n            \n            if (currentlyReadonly) {\n                // Enable editing\n                amountInput.removeAttribute('readonly');\n                amountInput.focus();\n                amountInput.select();\n                changeAmountBtn.textContent = 'Restore';\n                \n                // Add visual indication\n                amountInput.style.borderColor = '#f7931a';\n                amountInput.style.backgroundColor = '#2c2c2e';\n            } else {\n                // Restore cart amount\n                amountInput.value = window.bitnobData.cart.totalSats;\n                amountInput.setAttribute('readonly', 'readonly');\n                changeAmountBtn.textContent = 'Change';\n                \n                // Remove visual indication\n                amountInput.style.borderColor = 'rgba(76, 175, 80, 0.3)';\n                amountInput.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';\n            }\n        });\n\n        // Handle form reset to restore cart amount\n        form.addEventListener('reset', function() {\n            if (window.bitnobData.cart.hasItems) {\n                setTimeout(() => {\n                    amountInput.value = window.bitnobData.cart.totalSats;\n                    amountInput.setAttribute('readonly', 'readonly');\n                    if (changeAmountBtn) {\n                        changeAmountBtn.textContent = 'Change';\n                    }\n                    // Reset visual styling\n                    amountInput.style.borderColor = 'rgba(76, 175, 80, 0.3)';\n                    amountInput.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';\n                }, 0);\n            }\n        });\n    }\n\n    // Utility functions\n    function validateForm() {\n        let isValid = true;\n        \n        const amount = document.getElementById('bitnob-amount');\n        const email = document.getElementById('bitnob-email');\n\n        // Validate amount - check if it's readonly (from cart) or manual entry\n        if (!amount.hasAttribute('readonly')) {\n            if (!amount.value || parseInt(amount.value) < 1) {\n                showFieldError('amount-error', 'Please enter a valid amount (minimum 1 satoshi)');\n                isValid = false;\n            }\n        } else if (window.bitnobData.cart.hasItems && !amount.value) {\n            // This shouldn't happen, but just in case\n            showFieldError('amount-error', 'Amount is required');\n            isValid = false;\n        }\n\n        // Only validate email if it's not readonly (i.e., user is not logged in or has chosen to change email)\n        if (!email.hasAttribute('readonly')) {\n            if (!email.value || !isValidEmail(email.value)) {\n                showFieldError('email-error', 'Please enter a valid email address');\n                isValid = false;\n            }\n        } else if (window.bitnobData.user.isLoggedIn && !email.value) {\n            // This shouldn't happen, but just in case\n            showFieldError('email-error', 'Email is required');\n            isValid = false;\n        }\n\n        return isValid;\n    }\n\n    function isValidEmail(email) {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email);\n    }\n\n    function showFieldError(elementId, message) {\n        const errorElement = document.getElementById(elementId);\n        if (errorElement) {\n            errorElement.textContent = message;\n            errorElement.style.display = 'block';\n        }\n    }\n\n    function clearFieldErrors() {\n        const errorElements = document.querySelectorAll('.bitnob-field-error');\n        errorElements.forEach(element => {\n            element.textContent = '';\n            element.style.display = 'none';\n        });\n    }\n\n    function showLoading() {\n        loadingDiv.style.display = 'block';\n        form.style.display = 'none';\n    }\n\n    function hideLoading() {\n        loadingDiv.style.display = 'none';\n    }\n\n    function showError(message) {\n        errorDiv.textContent = message;\n        errorDiv.style.display = 'block';\n        form.style.display = 'block';\n    }\n\n    function showInvoice(data) {\n        // Populate invoice data\n        document.getElementById('invoice-amount').textContent = data.amount.toLocaleString();\n        document.getElementById('invoice-description').textContent = data.description;\n        document.getElementById('invoice-request').textContent = data.request;\n        document.getElementById('invoice-qr').src = data.qr_url;\n\n        // Show invoice section\n        invoiceDiv.style.display = 'block';\n        form.style.display = 'none';\n\n        // Show success message for logged-in users\n        if (window.bitnobData.user.isLoggedIn) {\n            showSuccessMessage(`Invoice created for ${window.bitnobData.user.displayName}`);\n        }\n    }\n\n    function showSuccessMessage(message) {\n        // Create a temporary success message\n        const successMsg = document.createElement('div');\n        successMsg.className = 'bitnob-success-message';\n        successMsg.innerHTML = `\n            <div class=\"success-icon\">âœ…</div>\n            <div class=\"success-text\">${message}</div>\n        `;\n        \n        invoiceDiv.insertBefore(successMsg, invoiceDiv.firstChild);\n        \n        // Remove after 5 seconds\n        setTimeout(() => {\n            if (successMsg.parentNode) {\n                successMsg.parentNode.removeChild(successMsg);\n            }\n        }, 5000);\n    }\n\n    function hideAllMessages() {\n        errorDiv.style.display = 'none';\n        invoiceDiv.style.display = 'none';\n        loadingDiv.style.display = 'none';\n    }\n\n    function setButtonLoading(loading) {\n        const btnText = submitBtn.querySelector('.btn-text');\n        const btnLoading = submitBtn.querySelector('.btn-loading');\n        \n        if (loading) {\n            btnText.style.display = 'none';\n            btnLoading.style.display = 'flex';\n            submitBtn.disabled = true;\n        } else {\n            btnText.style.display = 'block';\n            btnLoading.style.display = 'none';\n            submitBtn.disabled = false;\n        }\n    }\n\n    function fallbackCopyTextToClipboard(text) {\n        const textArea = document.createElement(\"textarea\");\n        textArea.value = text;\n        \n        // Avoid scrolling to bottom\n        textArea.style.top = \"0\";\n        textArea.style.left = \"0\";\n        textArea.style.position = \"fixed\";\n\n        document.body.appendChild(textArea);\n        textArea.focus();\n        textArea.select();\n\n        try {\n            const successful = document.execCommand('copy');\n            if (successful) {\n                copyBtn.querySelector('.copy-text').textContent = 'Copied!';\n                copyBtn.classList.add('copied');\n                \n                setTimeout(function() {\n                    copyBtn.querySelector('.copy-text').textContent = 'Copy';\n                    copyBtn.classList.remove('copied');\n                }, 2000);\n            }\n        } catch (err) {\n            console.error('Fallback: Oops, unable to copy', err);\n        }\n\n        document.body.removeChild(textArea);\n    }\n});\n"],"names":["document","addEventListener","form","getElementById","loadingDiv","errorDiv","invoiceDiv","submitBtn","copyBtn","createAnotherBtn","changeEmailBtn","emailInput","changeAmountBtn","amountInput","window","bitnobData","e","preventDefault","hideAllMessages","clearFieldErrors","formData","FormData","append","nonce","value","validateForm","showLoading","setButtonLoading","response","fetch","ajaxUrl","method","body","result","json","success","showInvoice","data","showError","error","console","hideLoading","invoiceRequest","textContent","navigator","clipboard","writeText","then","originalText","querySelector","classList","add","setTimeout","remove","catch","err","fallbackCopyTextToClipboard","style","display","reset","user","isLoggedIn","email","setAttribute","removeAttribute","borderColor","backgroundColor","cart","hasItems","totalSats","description","currentlyReadonly","hasAttribute","focus","select","isValid","amount","parseInt","showFieldError","isValidEmail","emailRegex","test","elementId","message","errorElement","errorElements","querySelectorAll","forEach","element","toLocaleString","request","src","qr_url","showSuccessMessage","displayName","successMsg","createElement","className","innerHTML","insertBefore","firstChild","parentNode","removeChild","loading","btnText","btnLoading","disabled","text","textArea","top","left","position","appendChild","successful","execCommand"],"sourceRoot":""}